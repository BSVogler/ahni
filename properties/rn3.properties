#random.seed=0
run.name=RN3
run.reset=true

###########
# evolution
###########
num.runs=15
num.generations=1000
popul.size=500
performance.target = 0
performance.target.type = lower

#true means mutation probabilities are applied to all possible places a mutation could occur
#false means probabilities apply to individual as a whole; only one topological mutation can occur per individual
#note that this applies only to topological mutations, not weight mutations
topology.mutation.classic=true

#classic=[0.01, 0.5], not classic=[0.0001,] dependent on pop size. 0.03
add.neuron.mutation.rate=0.1
#classic=[0.01, 0.5], not classic=[0.0001,] dependent on pop size. 0.4
add.connection.mutation.rate=0.2
#[0.01, 0.3]
remove.connection.mutation.rate=0.02
#only remove weights with magnitude smaller than this
remove.connection.max.weight=50

#should be 1.0
prune.mutation.rate=1.0

#[0.1, 0.8]. 0.5, 0.6  (applied to every connection)
weight.mutation.rate=0.5
#[1.0, 2.0] dependent on weight.max/min?
weight.mutation.std.dev=1

#percent of individuals used as parents (NOT surviving intact to next generation)
survival.rate=0.3
#proportion of sexual (crossover) versus asexual reproduction
crossover.proportion=0.25

#[1, 5]
selector.elitism.min.specie.size=5
#percent of individuals from each species copied to next generation unchanged
selector.elitism.proportion=0.1
#min number to select from a species (if it has size >=  selector.elitism.min.specie.size)
selector.elitism.min.to.select=1
selector.roulette=false
selector.max.stagnant.generations=999999
#minimum age of a species before it can go extinct (gives them a chance to mature)
selector.min.generations=25
selector.speciated.fitness=true


############
# speciation
############
#species distance factors
#c1, excess genes factor [1.0, 2.0]
chrom.compat.excess.coeff=1.0
#c2, disjoint genes factor [1.0, 2.0]
chrom.compat.disjoint.coeff=1.0
#c3, Weight difference factor [0.2, 3.0]
chrom.compat.common.coeff=1.0

#compatability threshold [0.1, 4.0], relative to c#
speciation.threshold=0.2
speciation.target=40
speciation.threshold.change=0.1


##################
# fitness function
##################
fitness_function.class=com.anji.robotnav.RobotNavFitnessFunction
fitness.hyperneat.min_threads=0
#max threads to use for fitness evaluation (including transcription of genotype/cppn to phenotype/substrate)
#if value is <= 0 then the detected number of processor cores will be used
fitness.hyperneat.max_threads=4
#if scale.factor > 1 then the substrate height, width and connection.range 
#will be multipled by scale.factor every time scale.fitness is reached, at 
#most scale.times times. If the 
fitness.hyperneat.scale.factor=2
fitness.hyperneat.scale.times=0
fitness.hyperneat.scale.performance=0
fitness.hyperneat.scale.recordintermediateperformance=true

#experiment specific
rn.subtask=3
rn.field.width=5
rn.field.height=5
rn.robot.size=0.25
rn.robot.speed=1
rn.robot.fieldofview=90
rn.object.size=0.25
rn.object.speed=0
rn.object.target.shape=sphere
rn.object.nontarget.shape=cylinder
rn.fitness.weight.percentcorrect=0
rn.fitness.weight.distanceavg.rms=0
rn.fitness.weight.distancefinal.actual=0
rn.fitness.weight.distancefinal.rms=1
rn.fitness.weight.timerequired=0
rn.performance.metric=rn.fitness.weight.distancefinal.actual
rn.framerate=10
rn.maxtrialtime=3
rn.maxtesttime=0
rn.numtrials=4
rn.saveimages=true
rn.antialias=false



################
# CPPN/AnjiNet #
################
#input and output size determined by hyperneat settings
#stimulus.size=7
#response.size=1
initial.topology.activation=random
initial.topology.fully.connected=true
initial.topology.num.hidden.neurons=0
initial.topology.activation.input=linear
initial.topology.activation.output=linear
recurrent=disallowed
recurrent.cycles=1
#[1, 500]
weight.max=3
weight.min=-3


#####################
# HyperNEAT/GridNet #
#####################
ann.type=hyperneat
ann.hyperneat.activation.function=sigmoid
ann.hyperneat.feedforward=true
#ann.hyperneat.cyclesperstep=4  not required for feed forward
ann.hyperneat.enablebias=true
ann.hyperneat.includedelta=true
ann.hyperneat.includeangle=true
ann.hyperneat.useinputlayerencoding=false

ann.hyperneat.connection.expression.threshold=0.2
ann.hyperneat.connection.range=999
ann.hyperneat.connection.weight.min=-3
ann.hyperneat.connection.weight.max=3

ann.hyperneat.depth=3
ann.hyperneat.height=20,4,1
ann.hyperneat.width=40,4,2

#############
# persistence
#############
persistence.class=com.anji.persistence.FilePersistence
persistence.base.dir=./db
persist.enable=false
persist.all=false
persist.champions=false
persist.last=false
persist.load.genotype=false
id.file=./db/id.xml
neat.id.file=./db/neatid.xml
hibernate.enable=false

##############
# presentation
##############
presentation.generate=false
presentation.dir=./nevt

#########
# logging
#########
log.pergenerations=1
logging.enable=false

log4j.rootLogger=INFO,C

log4j.appender.C=org.apache.log4j.ConsoleAppender
log4j.appender.C.layout=org.apache.log4j.PatternLayout
log4j.appender.C.layout.ConversionPattern=%-5p %m%x%n

log4j.appender.F=org.apache.log4j.FileAppender
log4j.appender.F.File=rn1.log
log4j.appender.F.layout=org.apache.log4j.PatternLayout
log4j.appender.F.layout.ConversionPattern=%-5p %m%x%n
